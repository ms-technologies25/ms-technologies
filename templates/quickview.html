{% extends "base.html" %}
{% block title %} MS Technologies | Quick View {% endblock title %}
{% block content %}
{% load static %}

<style>
    /* Quick-view image zoom */
    .quick-view .zoomable { position: relative; overflow: hidden; }
    .quick-view .zoomable img { transition: transform 0.06s ease; will-change: transform; display: block; }
    .quick-view .zoomable { cursor: zoom-out; }
    .quick-view .zoomable.is-zoomed { cursor: zoom-out; }
</style>

<section id="quick-view">
    <div class="quick-view">
        <div class="quick-view-images">
            <div class="quick-view-images-top">
                <div class="zoomable"><a href="{{ product.product_image_1.url }}"><img id="imagepr{{product.id}}" src="{{ product.product_image_1.url }}" alt="{{ product.product_name }}"></a></div>
                {% if product.product_image_2 %}
                <div class="zoomable"><a href="{{ product.product_image_2.url }}"><img src="{{ product.product_image_2.url }}" alt="{{ product.product_name }}"></a></div>
                {% endif %}
            </div>
        </div>

        <div class="quick-view-info">
            <h5 class="card-title mt-2" id="namepr{{product.id}}">{{product.product_name}}</h5>
            <h6 class="card-title mb-3">
                $ <span id="pricepr{{product.id}}">{{product.product_price}}</span>
            </h6>
            <div class="quick-view-info-description">{{ product.product_desc|safe }}</div>

            <div class="quick-view-info-features">
                <p>Product Id: <span>{{ product.id }}</span></p>
                <p>Category: <span>{{ product.product_category.name }}</span></p>
                <p>Stock Status: <span>{{ product.stock_status|title }}</span></p>
            </div>
        </div>
    </div>
</section>

<script>
    // Lightweight zoom-on-hover that follows cursor; no external dependencies
    (function(){
        if (window.matchMedia && window.matchMedia('(pointer: coarse)').matches) return; // skip on touch
        function attachZoom(container){
            if(!container) return;
            var img = container.querySelector('img');
            if(!img) return;
            var scale = 2; // zoom factor
            function onEnter(){ container.classList.add('is-zoomed'); }
            function onLeave(){ container.classList.remove('is-zoomed'); img.style.transform = 'none'; img.style.transformOrigin = 'center center'; }
            function onMove(e){
                if(!container.classList.contains('is-zoomed')) return;
                var rect = img.getBoundingClientRect();
                var x = ((e.clientX - rect.left) / rect.width) * 100;
                var y = ((e.clientY - rect.top) / rect.height) * 100;
                img.style.transformOrigin = x + '% ' + y + '%';
                img.style.transform = 'scale(' + scale + ')';
            }
            container.addEventListener('mouseenter', onEnter);
            container.addEventListener('mouseleave', onLeave);
            container.addEventListener('mousemove', onMove);
        }
        document.addEventListener('DOMContentLoaded', function(){
            var zoomables = document.querySelectorAll('.quick-view .zoomable');
            zoomables.forEach(attachZoom);
        });
    })();
</script>

{% endblock content %}
